{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Bot UI</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { width: 80%; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        #output { height: 200px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px; }
        #dataTable { width: 100%; border-collapse: collapse; }
        #dataTable th, #dataTable td { border: 1px solid #ddd; padding: 8px; }
        #dataTable th { background-color: #f2f2f2; }
    </style>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div id="sidePanel" class="side-panel">
        <div id="tradingBotSection">
            <h2>EMA slow/fast Bot</h2>
            <div class="form-group">
                <label for="symbol">Symbol:</label>
                <select id="symbol">
                    <option value="ETHUSDT">ETHUSDT</option>
                    <option value="BTCUSDT">BTCUSDT</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="interval">Interval:</label>
                <select id="interval">
                    <option value="1s">1s</option>
                    <option value="1m">1m</option>
                    <option value="1m">3m</option>
                    <option value="5m">5m</option>
                    <option value="15m">15m</option>
                    <option value="30m">30m</option>
                    <option value="1d">1d</option>
                </select>
            </div>
            
            <div class="form-group">    
                <label for="emaSlow">EMA Slow:</label>
                <input type="range" id="emaSlow" min="10" max="150" step="10" value="90">
                <span id="emaSlowValue">90</span>
            </div>
            
            <div class="form-group">
                <label for="emaFast">EMA Fast:</label>
                <input type="range" id="emaFast" min="5" max="145" step="5" value="45">
                <span id="emaFastValue">45</span>
            </div>

            <div class="form-group">
            <label for="numberInput">ADX period:</label>
            <input type="number" id="adxPeriod" min="0" max="30" step="1" required>
            </div>

            <div class="form-group">
            <label for="numberInput">ADX threshold:</label>
            <input type="number" id="adxThreshold" min="0" max="50" step="1" required>
            </div>
            
            <div class="form-group">
            <label for="numberInput">Choppiness period:</label>
            <input type="number" id="chopPeriod" min="0" max="30" step="1" required>
            </div>

            <div class="form-group">
            <label for="numberInput">Choppiness threshold:</label>
            <input type="number" id="chopThreshold" min="0" max="70" step="1" required>
            </div>
            
            <div class="form-group">
                <label for="initialTradePercentage">Initial Trade Percentage<br>(quote asset balance):</label>
                <input type="number" id="initialTradePercentage" min="1" max="100" value="10">
            </div>
            
            <button id="startTradingBtn">Start Trading</button>
            <button id="stopTradingBtn">Stop Trading</button>
        </div>
    </div>
    <div id="mainContent" class="main-content">
        <div class="content-fill">
            <button id="toggleButton" class="toggle-button" onclick="toggleSidePanel()">â˜°</button>
            
            <h2>Output Console</h2>
            <div id="output"></div>
            
            <h2>Last 10 Trades</h2>
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>Index</th>
                        <th>Timestamp</th>
                        <th>Side</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Total Gain/Loss</th>
                        <th>Total Gain/Loss %</th>
                        <th>Last Trade Gain/Loss</th>
                        <th>Last Trade Gain/Loss %</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <h2>Candlestick Plot</h2>
            <div class="chart-container">
                <div id="priceChart" style="width:100%; height:400px;"></div>
            </div>
        </div>
    </div>

    <script src="{% static 'js/trading_bot.js' %}"></script>
    <script src="{% static 'js/side_panel.js' %}"></script>
</body>

</html>